<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Okinawa Trip Planner</title>

  <!-- PWAï¼šå®‰è£åˆ°ä¸»ç•«é¢ç”¨ -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#e91e63" />

  <!-- iOS Add to Home Screen æ”¯æ´ -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Okinawa Trip" />

  <style>
    :root {
      --primary: #e91e63;
      --primary-light: #f8bbd0;
      --bg: #f5f5f5;
      --card-bg: #ffffff;
      --text-main: #212121;
      --text-sub: #757575;
      --radius-xl: 18px;
      --shadow-soft: 0 8px 16px rgba(0,0,0,0.08);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text-main);
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background: var(--bg);
    }

    header {
      padding: 16px 20px 12px;
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      color: white;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
    }

    header .subtitle {
      font-size: 13px;
      opacity: 0.9;
      margin-top: 4px;
    }

    .day-tabs {
      display: flex;
      gap: 8px;
      padding: 8px 12px 12px;
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      position: sticky;
      top: 60px;
      z-index: 9;
    }

    .day-tab {
      flex: 1;
      padding: 8px 0;
      border-radius: 999px;
      border: 0;
      background: rgba(255,255,255,0.25);
      color: white;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      backdrop-filter: blur(6px);
    }

    .day-tab.active {
      background: #ffffff;
      color: var(--primary);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }

    main {
      flex: 1;
      padding: 12px;
      padding-bottom: 70px; /* çµ¦åº•éƒ¨å°èˆªç•™ç©ºé–“ */
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      padding: 12px 14px;
      margin-bottom: 10px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
      cursor: pointer;
    }

    .time {
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .category-chip {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--primary-light);
      color: var(--primary);
      white-space: nowrap;
    }

    .note {
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 6px;
      line-height: 1.5;
      white-space: pre-line;
    }

    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
    }

    .btn-link {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 0;
      background: rgba(233,30,99,0.1);
      color: var(--primary);
      cursor: pointer;
    }

    .btn-link:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .empty {
      text-align: center;
      color: var(--text-sub);
      margin-top: 40px;
      font-size: 14px;
    }

    .bottom-nav {
      position: sticky;
      bottom: 0;
      left: 0;
      right: 0;
      max-width: 480px;
      margin: 0 auto;
      background: #ffffff;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.12);
      display: flex;
      justify-content: space-around;
      padding: 6px 4px 6px;
      z-index: 20;
    }

    .bottom-item {
      flex: 1;
      text-align: center;
      font-size: 11px;
      color: var(--text-sub);
    }

    .bottom-item span {
      display: block;
      font-size: 18px;
      margin-bottom: 2px;
    }

    .bottom-item.active {
      color: var(--primary);
      font-weight: 600;
    }

    @media (min-width: 768px) {
      header { border-radius: 0 0 18px 18px; }
      .day-tabs { top: 68px; }
      .bottom-nav { border-radius: 18px 18px 0 0; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Okinawa Trip</h1>
      <div class="subtitle">æ²–ç¹©è¡Œç¨‹å°å¹«æ‰‹ Â· é»ä¸‹é¢åˆ‡æ›å¤©æ•¸</div>
    </header>

    <div class="day-tabs" id="dayTabs">
      <!-- JS æœƒè‡ªå‹•å¡« D1 / D2 / D3 -->
    </div>

    <main>
      <div id="cardContainer"></div>
      <div class="empty" id="emptyState" style="display:none;">é€™ä¸€å¤©é‚„æ²’æœ‰å®‰æ’è¡Œç¨‹</div>
    </main>

    <nav class="bottom-nav">
      <div class="bottom-item active" id="nav-plan">
        <span>ğŸ—“ï¸</span>è¡Œç¨‹
      </div>
      <div class="bottom-item" id="nav-info">
        <span>â„¹ï¸</span>èªªæ˜
      </div>
      <div class="bottom-item" id="nav-settings">
        <span>â­</span>å°æé†’
      </div>
    </nav>
  </div>

  <script>
    // ====== 1. è¡Œç¨‹è³‡æ–™ï¼ˆå¯ä»¥è‡ªå·±å†è£œå®Œæ•´ï¼‰ ======
    const schedule = [
      // Day 1
      {
        day: "D1",
        label: "D1 Â· 1/9",
        time: "13:25â€“15:55ï¼ˆ2å°æ™‚30åˆ†ï¼‰",
        title: "æ¡ƒåœ’æ©Ÿå ´ T1 â†’ é‚£éœ¸æ©Ÿå ´",
        category: "äº¤é€š",
        note: "AirAsia FD230\nåœ‹éš›ç·š4F æˆ– åœ‹å…§ç·š1F æœ‰è±¬è‚‰è›‹é£¯ç³°å¯ä»¥å…ˆå¢Šè‚šå­ã€‚",
        cost: "æ©Ÿç¥¨ï¼šç´„ 18,262 NTDï¼ˆä¾†å›ï¼‰",
        link: "https://services.digital.go.jp/zh-cmn-hant/visit-japan-web/"
      },
      {
        day: "D1",
        label: "D1 Â· 1/9",
        time: "19:05â€“19:25ï¼ˆ20åˆ†ï¼‰",
        title: "é£¯åº— check in",
        category: "é£¯åº— / ä¼‘æ¯",
        note: "Sunset Beach Hotel\nè¾¦ç†å…¥ä½ã€æ”¾è¡Œæã€‚",
        cost: "ç´„ NTD 4,420",
        link: "https://www.booking.com/"
      },
      {
        day: "D1",
        label: "D1 Â· 1/9",
        time: "19:25â€“21:25ï¼ˆ2å°æ™‚ï¼‰",
        title: "ç¾åœ‹æ‘é€›è¡—ï¼‹æ™šé¤",
        category: "ç”¨é¤",
        note: "é€›è¡—ï¼‹æ™šé¤ã€‚\nå»ºè­°ï¼šæµœå±‹ãã°ï¼ˆé©åˆå°å­©ï¼‰ã€A&W ç¾å¼é¤å»³ï¼ˆè¦ªå­å‹å–„ï¼‰ã€‚",
        cost: "",
        link: "https://www.jathao.com/2015/10/aeon.html"
      },

      // Day 2
      {
        day: "D2",
        label: "D2 Â· 1/10",
        time: "08:00â€“09:00ï¼ˆ1å°æ™‚ï¼‰",
        title: "é£¯åº—æ—©é¤",
        category: "ç”¨é¤",
        note: "é£¯åº—å…§ç”¨æ—©é¤ï¼Œæ™‚é–“å½ˆæ€§ã€‚",
        cost: "",
        link: ""
      },
      {
        day: "D2",
        label: "D2 Â· 1/10",
        time: "09:30â€“12:30ï¼ˆ3å°æ™‚ï¼‰",
        title: "æ²–ç¹©å…’ç«¥ç‹åœ‹",
        category: "æ™¯é»",
        note: "å‹•ç‰©åœ’ï¼‹éŠæ¨‚è¨­æ–½ï¼Œå°å­©æ”¾é›»è¡Œç¨‹ã€‚\nå¯ä»¥è¦–ç‹€æ³ä¸­é€”ä¼‘æ¯ã€çœ‹å‹•ç‰©ã€‚",
        cost: "æˆäºº 1000å††ï¼Œå°å­© free",
        link: "https://www.okzm.jp/information-cht/"
      },
      {
        day: "D2",
        label: "D2 Â· 1/10",
        time: "17:10â€“19:40ï¼ˆ2å°æ™‚30åˆ†ï¼‰",
        title: "æ±å—æ¤ç‰©æ¨‚åœ’ï¼ˆå¤œé–“ç‡ˆé£¾ï¼‰",
        category: "æ™¯é»",
        note: "è³ç‡ˆã€æ•£æ­¥è¡Œç¨‹ã€‚\nè¦–å°å­©ç²¾ç¥èª¿æ•´åœç•™æ™‚é–“ã€‚",
        cost: "",
        link: "https://www.southeast-botanical.jp/tw/illumination/"
      },

      // Day 3
      {
        day: "D3",
        label: "D3 Â· 1/11",
        time: "10:20â€“13:20ï¼ˆ3å°æ™‚ï¼‰",
        title: "æ²–ç¹©ä¸–ç•Œï¼ˆç‰æ³‰æ´ï¼‰",
        category: "æ™¯é»",
        note: "æ´çªŸï¼‹åœ’å€ï¼‹è¡¨æ¼”ï¼Œå¯æ­é…ä¸­åˆç”¨é¤ã€‚\næœ‰éšæ¢¯èˆ‡å¡é“ï¼Œæ³¨æ„å¨ƒå¨ƒè»Šèˆ‡å°å­©é«”åŠ›ã€‚",
        cost: "",
        link: "https://www.gyokusendo.co.jp/okinawaworld/"
      },
      {
        day: "D3",
        label: "D3 Â· 1/11",
        time: "18:50â€“20:50ï¼ˆ2å°æ™‚ï¼‰",
        title: "åœ‹éš›é€šé€›è¡—ï¼‹æ™šé¤",
        category: "ç”¨é¤",
        note: "æœ€å¾Œæ¡è²·ï¼‹æ™šé¤æ™‚é–“ï¼Œè¦–å°å­©ç‹€æ³ææ—©å›é£¯åº—ä¼‘æ¯ã€‚",
        cost: "",
        link: ""
      }
    ];

    // å–å¾—æ‰€æœ‰å¤©æ•¸ï¼ˆD1, D2, D3ï¼‰
    const days = Array.from(new Set(schedule.map(item => item.day)));

    const dayTabsEl = document.getElementById("dayTabs");
    const cardContainer = document.getElementById("cardContainer");
    const emptyState = document.getElementById("emptyState");

    let currentDay = days[0] || "D1";

    function renderDayTabs() {
      dayTabsEl.innerHTML = "";
      days.forEach(day => {
        const btn = document.createElement("button");
        btn.className = "day-tab" + (day === currentDay ? " active" : "");
        const label = schedule.find(i => i.day === day)?.label || day;
        btn.textContent = label;
        btn.addEventListener("click", () => {
          currentDay = day;
          renderDayTabs();
          renderCards();
        });
        dayTabsEl.appendChild(btn);
      });
    }

    function renderCards() {
      const items = schedule.filter(item => item.day === currentDay);
      cardContainer.innerHTML = "";

      if (!items.length) {
        emptyState.style.display = "block";
        return;
      }
      emptyState.style.display = "none";

      items.forEach(item => {
        const card = document.createElement("div");
        card.className = "card";

        const header = document.createElement("div");
        header.className = "card-header";

        const left = document.createElement("div");
        const time = document.createElement("div");
        time.className = "time";
        time.textContent = item.time;

        const title = document.createElement("div");
        title.className = "title";
        title.textContent = item.title;

        left.appendChild(time);
        left.appendChild(title);

        const chip = document.createElement("div");
        chip.className = "category-chip";
        chip.textContent = item.category || "è¡Œç¨‹";

        header.appendChild(left);
        header.appendChild(chip);

        const note = document.createElement("div");
        note.className = "note";
        note.textContent = item.note || "";

        const footer = document.createElement("div");
        footer.className = "card-footer";

        const cost = document.createElement("div");
        cost.textContent = item.cost || "";

        const btn = document.createElement("button");
        btn.className = "btn-link";
        if (item.link) {
          btn.textContent = "æŸ¥çœ‹é€£çµ";
          btn.addEventListener("click", (e) => {
            e.stopPropagation();
            window.open(item.link, "_blank");
          });
        } else {
          btn.textContent = "ç„¡é€£çµ";
          btn.disabled = true;
        }

        footer.appendChild(cost);
        footer.appendChild(btn);

        card.appendChild(header);
        card.appendChild(note);
        card.appendChild(footer);

        cardContainer.appendChild(card);
      });
    }

    // åº•éƒ¨ nav ç°¡å–®åˆ‡æ›ï¼ˆç›®å‰åªæœ‰è¡Œç¨‹åœ¨ç”¨ï¼‰
    document.getElementById("nav-plan").addEventListener("click", () => {
      document.getElementById("nav-plan").classList.add("active");
      document.getElementById("nav-info").classList.remove("active");
      document.getElementById("nav-settings").classList.remove("active");
      cardContainer.style.display = "block";
      emptyState.style.display = schedule.some(i => i.day === currentDay) ? "none" : "block";
    });

    document.getElementById("nav-info").addEventListener("click", () => {
      document.getElementById("nav-plan").classList.remove("active");
      document.getElementById("nav-info").classList.add("active");
      document.getElementById("nav-settings").classList.remove("active");

      cardContainer.innerHTML =
        `<div class="card">
          <div class="title">ä½¿ç”¨èªªæ˜</div>
          <div class="note">
          ãƒ»ä¸‹æ–¹ã€Œè¡Œç¨‹ã€é ï¼šä¾å¤©æ•¸é¡¯ç¤ºç•¶å¤©å®‰æ’ã€‚\n
          ãƒ»ä¸Šæ–¹ç²‰è‰²æŒ‰éˆ•ï¼šåˆ‡æ› D1 / D2 / D3ã€‚\n
          ãƒ»å¡ç‰‡ä¸­çš„ã€ŒæŸ¥çœ‹é€£çµã€æœƒé–‹å•Ÿé¤å»³æˆ–æ™¯é»å®˜ç¶²ã€‚\n
          ãƒ»å¯ä»¥åœ¨æ‰‹æ©Ÿç€è¦½å™¨é¸ã€ŒåŠ å…¥ä¸»ç•«é¢ã€ï¼Œè®Šæˆåƒ APP ä¸€æ¨£ä½¿ç”¨ã€‚
          </div>
        </div>`;
      emptyState.style.display = "none";
    });

    document.getElementById("nav-settings").addEventListener("click", () => {
      document.getElementById("nav-plan").classList.remove("active");
      document.getElementById("nav-info").classList.remove("active");
      document.getElementById("nav-settings").classList.add("active");

      cardContainer.innerHTML =
        `<div class="card">
          <div class="title">å°æé†’</div>
          <div class="note">
          ãƒ»å¸¶å°å­©ï¼šé ç•™åˆç¡èˆ‡è‡¨æ™‚ä¼‘æ¯æ™‚é–“ï¼Œä¸è¦æŠŠè¡Œç¨‹æ’æ»¿ã€‚\n
          ãƒ»ä¸‹é›¨å‚™æ¡ˆï¼šç¾åœ‹æ‘ / åœ‹éš›é€š / è³¼ç‰©ä¸­å¿ƒå¯ä»¥ç•¶å‚™ç”¨è¡Œç¨‹ã€‚\n
          ãƒ»å¯ä»¥è‡ªå·±æ‰“é–‹ index.htmlï¼ŒæŠŠä¸Šé¢çš„ schedule é™£åˆ—åŠ æ›´å¤šè¡Œç¨‹ã€‚
          </div>
        </div>`;
      emptyState.style.display = "none";
    });

    // åˆå§‹åŒ–
    renderDayTabs();
    renderCards();

    // ====== 2. è¨»å†Š Service Workerï¼ˆPWA é›¢ç·š / å®‰è£ç”¨ï¼‰ ======
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("service-worker.js").catch(() => {});
      });
    }
  </script>
</body>
</html>
