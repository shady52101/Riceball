<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Okinawa Trip Planner</title>

  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#f06292" />

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Okinawa Trip" />

  <style>
    :root {
      --primary: #ec407a;
      --primary-dark: #d81b60;
      --bg: #fef4f8;
      --card-bg: #ffffff;
      --text-main: #212121;
      --text-sub: #757575;
      --radius-xl: 18px;
      --shadow-soft: 0 10px 24px rgba(233, 30, 99, 0.18);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #ffe3f0 0, #fef4f8 45%, #ffffff 100%);
      color: var(--text-main);
    }
    .app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 18px 20px 14px;
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      color: white;
      position: sticky;
      top: 0;
      z-index: 10;
      box-shadow: 0 6px 18px rgba(233, 30, 99, 0.35);
      border-radius: 0 0 24px 24px;
    }
    header h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 800;
      letter-spacing: 0.04em;
    }
    header .subtitle {
      font-size: 13px;
      opacity: 0.92;
      margin-top: 4px;
    }
    .day-tabs-wrap {
      padding: 10px 16px 4px;
      position: sticky;
      top: 72px;
      z-index: 9;
    }
    .day-tabs {
      display: flex;
      gap: 8px;
      background: rgba(255,255,255,0.9);
      padding: 6px;
      border-radius: 999px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      backdrop-filter: blur(10px);
    }
    .day-tab {
      flex: 1;
      padding: 8px 0;
      border-radius: 999px;
      border: 0;
      background: transparent;
      color: var(--primary-dark);
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
    }
    .day-tab span { display: block; font-size: 11px; opacity: 0.8; }
    .day-tab strong { display: block; font-size: 13px; }
    .day-tab.active {
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      color: #ffffff;
      box-shadow: 0 4px 12px rgba(233, 30, 99, 0.55);
    }
    main { flex: 1; padding: 16px 14px 32px; }
    .day-title {
      font-size: 15px;
      font-weight: 600;
      margin: 4px 4px 10px;
      color: var(--text-sub);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .day-title span { font-size: 12px; opacity: 0.9; }
    .timeline { position: relative; margin-left: 10px; padding-left: 12px; }
    .timeline::before {
      content: "";
      position: absolute;
      left: 4px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, rgba(236,64,122,0.1), rgba(236,64,122,0.35));
    }
    .card {
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      padding: 12px 14px;
      margin-bottom: 12px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
      cursor: pointer;
      user-select: none;
    }
    .card::before {
      content: "";
      position: absolute;
      left: -40px;
      top: -40px;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(236,64,122,0.18), transparent 65%);
      opacity: 0.7;
    }
    .dot {
      position: absolute;
      left: -18px;
      top: 16px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 2px solid #ffffff;
      background: var(--primary);
      box-shadow: 0 0 0 4px rgba(236,64,122,0.25);
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
    }
    .time { font-size: 11px; color: var(--text-sub); margin-bottom: 4px; }
    .title { font-size: 15px; font-weight: 700; margin-bottom: 2px; }
    .right-top { display:flex; align-items:center; gap:8px; }
    .category-chip {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(236,64,122,0.06);
      color: var(--primary-dark);
      border: 1px solid rgba(236,64,122,0.25);
      margin-top: 2px;
      white-space: nowrap;
    }
    .chev {
      font-size: 14px;
      color: rgba(216,27,96,0.75);
      transition: transform 0.18s ease;
    }
    .card.collapsed .chev { transform: rotate(-90deg); }
    .detail { margin-top: 10px; }
    .card.collapsed .detail { display: none; }
    .note {
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 8px;
      line-height: 1.5;
      white-space: pre-line;
    }
    .card-footer {
      display: flex;
      align-items: center;
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
      gap: 8px;
      flex-wrap: wrap;
    }
    .cost { font-weight: 500; margin-right: auto; white-space: pre-line; }
    .link-wrap { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn-link {
      font-size: 12px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 0;
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      color: #ffffff;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(233,30,99,0.35);
      white-space: nowrap;
    }
    .btn-link:disabled {
      opacity: 0.4;
      box-shadow: none;
      cursor: default;
      background: #e0e0e0;
      color: #757575;
    }
    .empty {
      text-align: center;
      color: var(--text-sub);
      margin-top: 40px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Okinawa Trip</h1>
      <div class="subtitle">Ê≤ñÁπ©Ë°ùË°ùË°ù</div>
    </header>

    <div class="day-tabs-wrap">
      <div class="day-tabs" id="dayTabs"></div>
    </div>

    <main>
      <div class="day-title" id="dayTitle"></div>
      <div class="timeline" id="cardContainer"></div>
      <div class="empty" id="emptyState" style="display:none;">ÈÄô‰∏ÄÂ§©ÈÇÑÊ≤íÊúâÂÆâÊéíË°åÁ®ã</div>
    </main>
  </div>

  <script>
/**
 * ‚úÖ ÈÄ£ÁµêËá™Áî±ÂëΩÂêçË¶èÂâáÔºà‰Ω†Âè™Ë¶ÅÊîπÈÄôË£°Ôºâ
 * link ÂèØ‰ª•ÊòØÔºö
 * 1) Â≠ó‰∏≤ÔºàÂèØÁî® \\n ÊîæÂ§öÂÄãÁ∂≤ÂùÄÔºâ=> ÊúÉËá™ÂãïÁî¢Áîü„Äåicon + Á∂≤Á´ôÂêç„Äç
 * 2) Èô£Âàó [{ label, url }, ...] => ‰Ω†Áµ¶‰ªÄÈ∫ºÂêçÂ≠óÂ∞±È°ØÁ§∫‰ªÄÈ∫ºÂêçÂ≠óÔºàicon ‰Ω†‰πüÂèØ‰ª•Ëá™Â∑±ÂØ´ÈÄ≤ labelÔºâ
 */
const schedule = [
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "13:25‚Äì15:55Ôºà2Â∞èÊôÇ30ÂàÜ ÊôÇÂ∑Æ1Â∞èÊôÇÔºâ",
    title: "Ê°ÉÊ©üT1‚û°Ô∏èÈÇ£Èú∏Ê©üÂ†¥",
    category: "‰∫§ÈÄö",
    note: "AirAsia FD230\nÊâãÊèê7kg*3 Ë®óÈÅã20kg*2\nÂúãÈöõÁ∑ö4FÊàñÊòØÂúãÂÖßÁ∑ö1FÊúâË±¨ËÇâËõãÈ£ØÁ≥∞",
    cost: "Â∑≤‰ªò 18,262 NTD (‰æÜÂõû)",
    link: [
      { label: "‚úàÔ∏è Visit Japan Web", url: "https://services.digital.go.jp/zh-cmn-hant/visit-japan-web/" },
      { label: "üçô Ë±¨ËÇâËõãÈ£ØÁ≥∞‰ªãÁ¥π", url: "https://hanblog.tw/porktamago/" }
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "15:55‚Äì17:55Ôºà2Â∞èÊôÇÔºâ",
    title: "ÈÇ£Èú∏Ê©üÂ†¥‚û°Ô∏èÁßüËªäÂÖ¨Âè∏",
    category: "‰∫§ÈÄö",
    note: "ÂÖ•Â¢ÉÂØ©Êü• + ÁßüËªäÂÖ¨Âè∏Êé•ÈÄÅ + ÁßüËªä\nË°åËÖ≥ÁßüËªä (Pin code : 63512871)",
    cost: "Êú™‰ªò 18.090ÂÜÜ\nÂ∑≤‰ªò  2,010ÂÜÜ",
    link: [
      { label: "üöå Êé•ÈßÅËªä‰ΩçÁΩÆ", url: "https://youtube.com/watch?v=iAl8v1AAcjM&embeds_referring_euri=https%3A%2F%2Ffootprint-rentacar.com%2F&source_ve_path=OTY3MTQ/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "17:55‚Äì18:25Ôºà30ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "ÁßüËªäÂÖ¨Âè∏ -> ÊºÅÂ∏´È£üÂ†Ç Â§ß„ÅØ„Çô„Çì„Åµ„Çô„ÇãËàû „Åï„Åã„Å™Â§ßÁµ±",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Okinawaangya+Car+Rental,+3+Chome-8-11+Kanagusuku,+Naha,+Okinawa+901-0155%E6%97%A5%E6%9C%AC/Ryoshi+Shokudo+Obanburumai+Sakana+Daitoryo,+3+Chome-1-17+Minatomachi,+Naha,+Okinawa+900-0001%E6%97%A5%E6%9C%AC/@26.2267077,127.7007522,13.42z/data=!3m1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m15!4m14!1m5!1m1!1s0x34e569dca4935975:0xf7655eeca9dc26ba!2m2!1d127.6621154!2d26.2011231!1m5!1m1!1s0x34e56b047c4b65c9:0x3e70d1280ee22c7a!2m2!1d127.6803223!2d26.2436476!3e0!5i1?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "18:25‚Äì19:25Ôºà1Â∞èÊôÇÔºâ",
    title: "ÊôöÈ§ê",
    category: "Áî®È§ê",
    note: "ÊºÅÂ∏´È£üÂ†Ç Â§ß„ÅØ„Çô„Çì„Åµ„Çô„ÇãËàû „Åï„Åã„Å™Â§ßÁµ±\nÂ§ß‰ªΩÈáè‰∏ºÈ£Ø/È∞ªÈ≠öÈ£Ø",
    cost: "",
    link: [
      { label: "üç£ È§êÂª≥‰ªãÁ¥π", url: "https://plumpyblog.com/ryoshi-shokudo/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "19:25‚Äì20:05Ôºà40ÂàÜÔºâ",
    title: " ‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "ÊôöÈ§ê -> sunset beach hotel (Âê´Êó©È§ê)",
    cost: "Â∑≤‰ªò 4,420 NTD",
    link: [
      { label: "üõèÔ∏è È£ØÂ∫ó", url: "https://beachmonpa.co.jp/" },
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Ryoshi+Shokudo+Obanburumai+Sakana+Daitoryo,+3+Chome-1-17+Minatomachi,+Naha,+Okinawa+900-0001%E6%97%A5%E6%9C%AC/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/@26.2790994,127.6809087,13z/data=!3m2!4b1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m14!4m13!1m5!1m1!1s0x34e56b047c4b65c9:0x3e70d1280ee22c7a!2m2!1d127.6803223!2d26.2436476!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "20:05‚Äì21:25Ôºà1Â∞èÊôÇ20ÂàÜÔºâ",
    title: "È£ØÂ∫ó checkin + ÁæéÂúãÊùëÈÄõË°ó",
    category: "Ë≥ºÁâ©",
    note: "",
    cost: "",
    link: [
    { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•1", url: "https://www.gltjp.com/zh-hant/article/item/21095/" },
    { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•2", url: "https://bobbyfun.tw/2024-01-08-2709/" },
    { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•3", url: "https://okinawa.letsgojp.com/archives/11334/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "21:25‚Äì22:55Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "AEON ÂåóË∞∑",
    category: "Ë≥ºÁâ©",
    note: "Â™ΩÂ™ΩÊôÇÈñì\nË∂ÖÂ∏ÇÂà∞ 23:00 ÂïÜÂ∫óÂà∞22:00",
    cost: "",
     link: [
    { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•", url: "https://bobowin.blog/aeon-american/" },
    ],
  }, 
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "08:30‚Äì09:00Ôºà30ÂàÜÔºâ",
    title: "È£ØÂ∫ó",
    category: "Áî®È§ê",
    note: "È£ØÂ∫óÊó©È§ê",
    cost: "",
    link: [
      { label: "üõèÔ∏è È£ØÂ∫ó", url: "https://beachmonpa.co.jp/" },
      ],
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "09:00‚Äì09:30Ôºà30ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "È£ØÂ∫ó -> Ê≤ñÁπ©ÂÖíÁ´•ÁéãÂúã",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Goya,+5+Chome%E2%88%927+%E6%B2%96%E7%B9%A9%E5%85%92%E7%AB%A5%E7%8E%8B%E5%9C%8B/@26.316697,127.7690274,15z/data=!3m1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m15!4m14!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e512738000a60d:0x8be494fd3bd9ee0b!2m2!1d127.80304!2d26.327691!3e0!5i1?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "09:30‚Äì12:30Ôºà3Â∞èÊôÇÔºâ",
    title: "Ê≤ñÁπ©ÂÖíÁ´•ÁéãÂúã",
    category: "ÊôØÈªû",
    note: "Âπ≥Êó•ÁáüÊ•≠ÊôÇÈñì : 9:30-17:30\nÂÅáÊó•ÁáüÊ•≠ÊôÇÈñì : 9:30-21:00",
    cost: "Êú™‰ªò Êàê‰∫∫ 1,000ÂÜÜ / Â∞èÂ≠© free",
    link: [
      { label: "üå¥ ÂÖíÁ´•ÁéãÂúã", url: "https://www.okzm.jp/information-cht/" },
      ],
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "12:30‚Äì13:00Ôºà30ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "Ê≤ñÁπ©ÂÖíÁ´•ÁéãÂúã -> ÁæéÂúãÊùë",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Goya,+5+Chome%E2%88%927+%E6%B2%96%E7%B9%A9%E5%85%92%E7%AB%A5%E7%8E%8B%E5%9C%8B/@26.316697,127.7690274,15z/data=!3m1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m15!4m14!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e512738000a60d:0x8be494fd3bd9ee0b!2m2!1d127.80304!2d26.327691!3e0!5i1?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },

  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "13:00‚Äì14:30Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "ÁæéÂúãÊùëÂçàÈ§ê",
    category: "Áî®È§ê",
    note: "AI Êé®Ëñ¶ :  „Çπ„ÉÜ„Éº„Ç≠„Éè„Ç¶„ÇπÂõõÂ≠£ÔºàSunabeÔºâ-ÈêµÊùøÁâõÊéí\nAI Êé®Ëñ¶ :  È≥•„Å®Âçµ„ÅÆÂ∞ÇÈñÄÂ∫ó È≥•ÁéâÔºàÂåóË∞∑Â∫óÔºâ- Ë¶™Â≠ê‰∏º„ÄÅÁéâÂ≠êÁáí„ÄÅÂíñÂì©\nAI Êé®Ëñ¶ :  „ÇÑ„Å£„Å±„Çä„Çπ„ÉÜ„Éº„Ç≠ÔºàÁæéÂúãÊùë) - ÁæéÂºèÈ§êÂª≥",
    cost: "",
    link: [
      { label: "üçΩÔ∏è ÁæéÈ£üÊé®Ëñ¶", url: "https://tw.tabiiro.travel/gourmet/article/americanvillage-gourmet/" },
    ]
  },

  
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "14:30‚Äì16:30Ôºà2Â∞èÊôÇÔºâ",
    title: "È£ØÂ∫ó‰ºëÊÅØ",
    category: "‰ºëÊÅØ",
    note: "ÂÖÖÈõªÊôÇÈñì/Â™ΩÂ™ΩËá™Áî±ÊôÇÈñì",
    cost: "",
    link: "",
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "16:30‚Äì17:10Ôºà40ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "È£ØÂ∫ó -> Êù±ÂçóÊ§çÁâ©Ê®ÇÂúí",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+8-11+Mihama,+Chatan,+Nakagami+District,+Okinawa+904-0115%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Chibana,+%E6%9D%B1%E5%8D%97%E6%A4%8D%E7%89%A9%E6%A8%82%E5%9C%92/@26.3421377,127.7550494,13.5z/data=!4m14!4m13!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e511d8db9268d7:0x97aa9da99ec7390b!2m2!1d127.8065709!2d26.3755374!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "17:10‚Äì19:40Ôºà2Â∞èÊôÇ30ÂàÜÔºâ",
    title: "Êù±ÂçóÊ§çÁâ©Ê®ÇÂúí",
    category: "ÊôØÈªû",
    note: "ÁáàÂÖâÁßÄÔºåÂ§úÈñìÁ•®17:00~22:00 \n(Áï∂Â§©ÊúâÊó•Êú¨Êàê‰∫∫ÁØÄÊ¥ªÂãïÔºåÁ¥∞ÁØÄÊú™Áü•)",
    cost: "Êú™‰ªò Êàê‰∫∫ 2500ÂÜÜ/Â∞èÂ≠© 900ÂÜÜ",
    link: [
    { label: "üéÜ ÊôØÈªûË≥áË®ä", url: "https://www.southeast-botanical.jp/tw/illumination/" },
    ]
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "19:40‚Äì20:20Ôºà40ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "Êù±ÂçóÊ§çÁâ©Ê®ÇÂúí -> ÁæéÂúãÊùë",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+8-11+Mihama,+Chatan,+Nakagami+District,+Okinawa+904-0115%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Chibana,+%E6%9D%B1%E5%8D%97%E6%A4%8D%E7%89%A9%E6%A8%82%E5%9C%92/@26.3421377,127.7550494,13.5z/data=!4m14!4m13!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e511d8db9268d7:0x97aa9da99ec7390b!2m2!1d127.8065709!2d26.3755374!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "20:20‚Äì21:30Ôºà1Â∞èÊôÇ10ÂàÜÔºâ",
    title: "ÁæéÂúãÊùëÊôöÈ§ê",
    category: "Áî®È§ê",
    note: "JUMBO STEAK HAN'S (ÊúâÂÖ©ÈñìÂ∫ó) \n ÊàñÊòØÁáíËÇâ(ÈúÄÊèêÂâçÈ†êË®Ç)",
    cost: "",
    link: [
    { label: "ü•© ÁæéÈ£ü‰ªãÁ¥π", url: "https://choyce.tw/steak-hans-house/" },
    ]
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "08:30‚Äì09:30Ôºà1Â∞èÊôÇÔºâ",
    title: "È£ØÂ∫ó",
    category: "Áî®È§ê",
    note: "È£ØÂ∫óÊó©È§ê + check out",
    cost: "",
    link: "",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "09:30‚Äì10:00Ôºà30ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "È£ØÂ∫ó -> Ê∞∏Êó∫Â§¢Ê®ÇÂüé",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/AEON+MALL+Okinawa+Rycom,+1%E7%95%AA%E5%9C%B0+Raikamu,+Kitanakagusuku,+Nakagami+District,+Okinawa+901-2306%E6%97%A5%E6%9C%AC/@26.2980708,127.7892839,14.21z/data=!4m14!4m13!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e5126214d2f427:0xcb2e803176e4f16b!2m2!1d127.7966025!2d26.3137504!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "10:00‚Äì13:00Ôºà3Â∞èÊôÇÔºâ",
    title: "Ê∞∏Êó∫Â§¢Ê®ÇÂüé",
    category: "Ë≥ºÁâ© + Áî®È§ê",
    note: "",
    cost: "",
     link: [
    { label: "üõçÔ∏è ÂïÜÂ†¥Ë≥áË®ä", url: "https://tw.aeonmall.global/mall/okinawarycom/food-drink/" },
    { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•", url: "https://bobbyfun.tw/2024-01-07-2699/" },
    { label: "üé† ÂÖíÁ´•Ë®≠ÊñΩ", url: "https://boysmom.life/2017-08-24-117/" },     
     ],
  }, 
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "13:00‚Äì13:50Ôºà50ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "Ê∞∏Êó∫Â§¢Ê®ÇÂüé-> Ê≤ñÁπ©‰∏ñÁïå(ÁéâÊ≥âÊ¥û)\nÂ∞èÂºüÁù°Ë¶∫ÊôÇÈñì",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/AEON+MALL+Okinawa+Rycom,+1%E7%95%AA%E5%9C%B0+Raikamu,+Kitanakagusuku,+Nakagami+District,+Okinawa+901-2306%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E5%8D%97%E5%9F%8E%E5%B8%82+Tamagusuku,+Maekawa+%E7%8E%89%E6%B3%89%E6%B4%9E/@26.2276119,127.6791699,12z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0x34e5126214d2f427:0xcb2e803176e4f16b!2m2!1d127.7966025!2d26.3137504!1m5!1m1!1s0x34e56985519f786b:0x5e9a8bdcd64306dd!2m2!1d127.7494344!2d26.1403423!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "13:50‚Äì16:50Ôºà3Â∞èÊôÇÔºâ",
    title: "Ê≤ñÁπ©‰∏ñÁïå(ÁéâÊ≥âÊ¥û)",
    category: "ÊôØÈªû",
    note: "Â§™ÈºìË°®Êºî„Äã(1)10:30 (2)12:30 (3)14:30\nÊØíËõáË°®Êºî (1)11:30 (2)13:30 (3)15:30\nËæ£Ê§íÁ≤âÂøÖË≤∑",
    cost: "Êú™‰ªò Êàê‰∫∫ 2,000ÂÜÜ, Â∞èÂ≠© 1,000ÂÜÜ",
        link: [
      { label: "üé∂ Ê≤ñÁπ©‰∏ñÁïå", url: "https://www.google.com/search?q=%E6%B2%96%E7%B9%A9%E4%B8%96%E7%95%8C+%E7%8E%89%E6%B3%89%E6%B4%9E" },
    ]
  },
    {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "16:50‚Äì17:00Ôºà10ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "Ê≤ñÁπ©‰∏ñÁïå(ÁéâÊ≥âÊ¥û) -> costco",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Okinawasoba-Kintarou,+%E3%81%B5%E3%81%AA%E3%81%93%E3%81%97%E3%82%A2%E3%83%91%E3%83%BC%E3%83%88+Funakoshi-1197+Tamagusuku,+Nanjo,+Okinawa+901-0618%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E5%8D%97%E5%9F%8E%E5%B8%82+Tsukishiro,+Kakinohana+COSTCO%E5%A5%BD%E5%B8%82%E5%A4%9A+%E6%B2%96%E7%B9%A9%E5%BA%97/@26.1500059,127.7631814,15z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0x34e56f12041e81c3:0xb1f12121b0b040c5!2m2!1d127.755329!2d26.1489297!1m5!1m1!1s0x34e56f002d5171dd:0x6f86b1ebb56a155c!2m2!1d127.7866429!2d26.1552838!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "17:00‚Äì18:30Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "COSTCO",
    category: "ÈÄõË°ó",
    note: "Âè™ËÉΩÁèæÈáëÊàñÊòØmaster card\n‰∏çËÉΩÈÄÄÁ®Ö",
    cost: "",
    link: [
      { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•", url: "https://www.funliday.com/posts/okinawa-costco/" },
    ],
  },
    {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "18:30‚Äì19:30Ôºà1Â∞èÊôÇÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "COSTCO -> ÂúãÈöõÈÄöÂ§ßÂíåROYNETÈÖíÂ∫ó\nÈ£ØÂ∫ó‰ªòË≤ªÂÅúËªäÂ†¥ÔºåÂÖàÂà∞ÂÖàË¥è\nÊòüÊúüÊó• 12:00~18:00 ÂúãÈöõÈÄöÊ≠•Ë°åËÄÖÂ§©Âúã",
    cost: "",
    link: [
      { label: "üõèÔ∏è È£ØÂ∫ó", url: "https://www.daiwaroynet.jp/ct/naha-kokusaidori/" },
      { label: "üöó google map", url: "https://www.google.com/maps/dir/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E9%82%A3%E9%9C%B8%E5%B8%82+Asato,+2+Chome%E2%88%921+%E9%82%A3%E9%9C%B8%E5%9C%8B%E9%9A%9B%E9%80%9A%E5%A4%A7%E5%92%8CROYNET%E9%A3%AF%E5%BA%97/%E6%97%A5%E6%9C%AC%E3%80%92901-0601+Okinawa,+Nanjo,+Tsukishiro,+COSTCO%E5%A5%BD%E5%B8%82%E5%A4%9A+%E6%B2%96%E7%B9%A9%E5%BA%97+IC%E5%8D%97%E5%9C%9F%E5%9C%B0%E5%8C%BA%E7%94%BB%E6%95%B4%E7%90%86%E4%BA%8B%E6%A5%AD%E5%9C%B0%E5%86%851%E8%A1%97%E5%8C%BA1/@26.1663933,127.7473131,14.29z/data=!4m14!4m13!1m5!1m1!1s0x34e5696484d555e5:0xa8fda093394851cc!2m2!1d127.6936214!2d26.2176311!1m5!1m1!1s0x34e56f002d5171dd:0x6f86b1ebb56a155c!2m2!1d127.7866429!2d26.1552838!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "19:30‚Äì21:30Ôºà2Â∞èÊôÇÔºâ",
    title: "È£ØÂ∫ócheck in +ÂúãÈöõÈÄöÈÄõË°ó+ÊôöÈ§ê",
    category: "Áî®È§ê",
    note: "ÂúãÈöõÈÄöÂ§ßÂíåROYNETÈÖíÂ∫ó\nÊó©È§êË¶ÅÂä†Ë≥º322 NTD/‰∫∫ÔºåÂÖíÁ´•ÂÖçË≤ª\nAIÊé®Ëñ¶ : Ëä±Á¨†È£üÂ†Ç - ÂÆ∂Â∫≠ÂºèÊñôÁêÜ\nAIÊé®Ëñ¶ : ‰∏âÁ¨†È£üÂ†ÇÔºà24 Â∞èÊôÇ) - Âú®Âú∞È§êÂª≥",
    cost: "Â∑≤‰ªò 4.227 NTD",
    link: [
    { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•1", url: "https://bobbyfun.tw/2024-01-08-2708/" },
    { label: "üõçÔ∏è ÈÄõË°óÊîªÁï•2", url: "https://tc.tabirai.net/sightseeing/article/kokusai-street-shopping//" },
    { label: "üçú ÁæéÈ£üÊé®Ëñ¶1", url: "https://www.youtube.com/watch?v=RyfCLurnJNA/" },
    { label: "üçú ÁæéÈ£üÊé®Ëñ¶2", url: "https://www.wendyjourney.com/kokusai-dori-food/" },
    ],
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "08:30‚Äì09:30Ôºà1Â∞èÊôÇÔºâ",
    title: "Êó©È§ê + È£ØÂ∫ócheck out",
    category: "Áî®È§ê",
    note: "È£ØÂ∫óÊó©È§êË¶ÅÂä†Ë≥º",
    cost: "Êú™‰ªò Â§ß‰∫∫ 1,980 ÂÜÜ\nÂÖíÁ´• ÂÖçË≤ª",    
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "09:30‚Äì09:45Ôºà15ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "È£ØÂ∫ó > Ê≥¢‰∏äÂÆÆ",
    cost: "",
    link: [
    { label: "üöó google map", url: "https://www.google.com/maps/dir/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E9%82%A3%E9%9C%B8%E5%B8%82+Asato,+2+Chome%E2%88%921+%E9%82%A3%E9%9C%B8%E5%9C%8B%E9%9A%9B%E9%80%9A%E5%A4%A7%E5%92%8CROYNET%E9%A3%AF%E5%BA%97/%E6%97%A5%E6%9C%AC%E3%80%92901-0601+Okinawa,+Nanjo,+Tsukishiro,+COSTCO%E5%A5%BD%E5%B8%82%E5%A4%9A+%E6%B2%96%E7%B9%A9%E5%BA%97+IC%E5%8D%97%E5%9C%9F%E5%9C%B0%E5%8C%BA%E7%94%BB%E6%95%B4%E7%90%86%E4%BA%8B%E6%A5%AD%E5%9C%B0%E5%86%851%E8%A1%97%E5%8C%BA1/@26.1663933,127.7473131,14.29z/data=!4m14!4m13!1m5!1m1!1s0x34e5696484d555e5:0xa8fda093394851cc!2m2!1d127.6936214!2d26.2176311!1m5!1m1!1s0x34e56f002d5171dd:0x6f86b1ebb56a155c!2m2!1d127.7866429!2d26.1552838!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "09:45‚Äì10:45Ôºà1Â∞èÊôÇÔºâ",
    title: "Ê≥¢‰∏äÂÆÆ",
    category: "ÊôØÈªû",
    note: "",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "10:45‚Äì11:00Ôºà15ÂàÜÔºâ",
    title: "‚¨áÔ∏è",
    category: "‰∫§ÈÄö",
    note: "Ê≥¢‰∏äÂÆÆ > ÈÇ£Èú∏Ê∏Ø (Êµ∑‰∏äËßÄÂÖâËàπOrcaËôü)",
    cost: "",
     link: [
    { label: "üöó google map", url: "https://www.google.com/maps/dir/Naminouegusanpaishasenyo+Parking+Lot,+1+Chome-25-10+Wakasa,+Naha,+Okinawa+900-0031%E6%97%A5%E6%9C%AC/Naha+Port+Parking+Lot,+3-2-1+Tondocho,+Naha,+Okinawa+900-0035%E6%97%A5%E6%9C%AC/@26.2156047,127.6652209,16z/data=!3m2!4b1!5s0x34e5696490700691:0x765739d498290581!4m14!4m13!1m5!1m1!1s0x34e569006a4d5495:0xb1be8b57693545a5!2m2!1d127.6712424!2d26.220213!1m5!1m1!1s0x34e56976c5e233f5:0x44e7ba90416bdbc0!2m2!1d127.6703948!2d26.2109788!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "11:00‚Äì12:30Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "Êµ∑‰∏äËßÄÂÖâËàπOrcaËôü",
    category: "ÊôØÈªû",
    note: "11:30 ËßÄÂÖâËàπ\nÂ∞öÊú™È†êÁ¥Ñ",
    cost: "‰∏çÂê´È§ê : Â§ß‰∫∫ 2,200, Â∞èÂ≠©ÂÖçË≤ª \n Âê´È§ê : Â§ß‰∫∫ 4,500, Â∞èÂ≠© 500",
    link: [
    { label: "üõçÔ∏è ÊôØÈªû‰ªãÁ¥π", url: "https://fullfenblog.tw/glass-bottom-boat/" },
    { label: "üçú È†êÁ¥ÑÁ∂≤Á´ô", url: "https://tw.westmarine.co.jp/orca_lunch.php" },
    ],
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "12:30‚Äì13:45Ôºà1Â∞èÊôÇ15ÂàÜÔºâ",
    title: "ÂçàÈ§ê + ÁßüËªäÂÖ¨Âè∏ÈÇÑËªä",
    category: "Áî®È§ê",
    note: "ÈÇÑËªäÂâçË¶ÅÂä†ÊªøÊ≤π\nÈÅ∏Êìá‰∏Ä : ËßÄÂÖâËàπÊµ∑ÈÆÆ‰∏ºÂêÉÂà∞È£ΩÊñπÊ°à(Â∞èÂ≠©ÊòØÂ•óÈ§ê)\nÈÅ∏Êìá‰∫å : Nakazaya „Å™„Åã„ÅñÂÆ∂Ê≤ñÁπ©È∫µ(ÁßüËªäÂÖ¨Âè∏Ê≠•Ë°å4ÂàÜÈêòÔºåË°åÊùéÂØÑÊîæÁßüËªäÂÖ¨Âè∏?)\nÈÅ∏Êìá‰∏â : Ê©üÂ†¥ÁæéÈ£ü",
    link: [
    { label: "‚õΩ Âä†Ê≤πÁ´ô", url: "https://www.google.com/maps/place/apollostation+Oroku+Kinjo+SS/@26.201515,127.6616106,18.25z/data=!4m10!1m2!2m1!1z5Yqg5rK556uZ!3m6!1s0x34e569b79ed74589:0xae0f20014db85b03!8m2!3d26.2018544!4d127.6622261!15sCgnliqDmsrnnq5laDCIK5Yqg5rK5IOermZIBC2dhc19zdGF0aW9umgEjQ2haRFNVaE5NRzluUzBWSlEwRm5TVU4yT0dGNVkxaDNFQUXgAQD6AQUIogEQIg!16s%2Fg%2F1tfm4dr8?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    { label: "üçú Nakazaya ", url: "https://slowlifeinokinawa.com/okifood-nakazaya/" },
    { label: "ü•© Ê©üÂ†¥ÁæéÈ£ü ", url: "https://www.naha-airport.co.jp/zh-hant/spend/shop_and_restaurant/search/?type=%E3%83%AC%E3%82%B9%E3%83%88%E3%83%A9%E3%83%B3&category=&type_airport=%E5%9B%BD%E9%9A%9B%E7%B7%9A&floor=" },  
    ],
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "13:45‚Äì14:15Ôºà30ÂàÜÔºâ",
    title: "ÁßüËªäÂÖ¨Âè∏‚û°Ô∏èÊ©üÂ†¥",
    category: "‰∫§ÈÄö",
    note: "ÈÇÑËªä+Êé•ÈßÅÂà∞Ê©üÂ†¥",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "14:15‚Äì16:55Ôºà2Â∞èÊôÇ40ÂàÜÔºâ",
    title: "ÈÇ£Èú∏Ê©üÂ†¥",
    category: "‰∫§ÈÄö",
    note: "Â∞ñÂ≥∞ÊôÇÊÆµÊúÄÂ•Ω‰øùÁïô2:30",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "16:55‚Äì17:35Ôºà40ÂàÜÈêò ÊôÇÂ∑Æ1Â∞èÊôÇÔºâ",
    title: "ÈÇ£Èú∏Ê©üÂ†¥‚û°Ô∏èÊ°ÉÊ©üT1",
    category: "‰∫§ÈÄö",
    note: "AirAsia FD231\nÊâãÊèê7kg*3 Ë®óÈÅã20kg*3",
    cost: "",
    link: "",
  },
{
    day: "info",
    label: "info",
    time: "",
    title: "‰º¥ÊâãÁ¶Æ",
    category: "üéÅ",
    note: "ÈÇ£Èú∏Ê©üÂ†¥„ÄåÂúãÂÖßÁ∑ö„ÄçÁöÑ2Ê®ìÁÇ∫Ë≥ºÁâ©Ê®ìÂ±§ÔºåÁ∂≤ÁæÖ‰∫ÜÁ®ÆÈ°ûË±êÂØåÁöÑÊ≤ñÁπ©ÂêçÁî¢",
    cost: "",
    link: [
    { label: "‰º¥ÊâãÁ¶Æ‰ªãÁ¥π", url: "https://tc.tabirai.net/sightseeing/article/okinawa-gift-summary/" },
    { label: "ÈôêÂÆöÂêçÁî¢", url: "https://tc.tabirai.net/sightseeing/article/okinawa-limited-snacks/" },
    ],
  },

];

function normalizeUrl(raw) {
  const s = (raw || "").trim();
  if (!s) return "";
  if (/^https?:\/\//i.test(s)) return s;
  if (/^[a-z0-9.-]+\.[a-z]{2,}(\/.*)?$/i.test(s)) return "https://" + s;
  return "";
}

function splitLinkField(linkField) {
  if (!linkField) return [];
  if (Array.isArray(linkField)) return linkField;
  return String(linkField)
    .split(/\\n|\\r|,\\s*/g)
    .map(p => p.trim())
    .filter(Boolean);
}

function guessIcon(url) {
  try {
    const u = new URL(url);
    const host = u.hostname.replace(/^www\\./, "").toLowerCase();
    const full = (host + (u.pathname || "")).toLowerCase();
    if (full.includes("google.com/maps") || full.includes("maps.app.goo.gl") || host.includes("maps")) return "üìç";
    if (full.includes("booking") || full.includes("ticket") || full.includes("reserve") || full.includes("trip.com") || full.includes("klook") || full.includes("kkday")) return "üéüÔ∏è";
    return "üåê";
  } catch (e) {
    return "üåê";
  }
}

// Build item.links (used by UI)
// - If link is array [{label,url}] => respect label 100%
// - If link is string => auto label = icon + host
schedule.forEach(item => {
  const raw = splitLinkField(item.link);
  const links = [];
  raw.forEach(v => {
    if (typeof v === "string") {
      const url = normalizeUrl(v);
      if (!url) return;
      const icon = guessIcon(url);
      let host = "";
      try { host = new URL(url).hostname.replace(/^www\\./,""); } catch(e) {}
      links.push({ label: `${icon} ${host || "ÈÄ£Áµê"}`, url });
    } else if (v && v.url) {
      const url = normalizeUrl(v.url);
      if (!url) return;
      links.push({ label: v.label || (guessIcon(url) + " ÈÄ£Áµê"), url });
    }
  });
  item.links = links;
});

const days = Array.from(new Set(schedule.map(item => item.day)));
const dayMeta = {};
schedule.forEach(item => { if (!dayMeta[item.day]) dayMeta[item.day] = item.label; });

const dayTabsEl = document.getElementById("dayTabs");
const cardContainer = document.getElementById("cardContainer");
const emptyState = document.getElementById("emptyState");
const dayTitleEl = document.getElementById("dayTitle");

let currentDay = days[0] || "D1";

function renderDayTabs() {
  dayTabsEl.innerHTML = "";
  days.forEach(day => {
    const btn = document.createElement("button");
    btn.className = "day-tab" + (day === currentDay ? " active" : "");
    const label = dayMeta[day] || day;
    const parts = label.split(" ¬∑ ");
    const d = parts[0] || day;
    const date = parts[1] || "";
    btn.innerHTML = "<strong>" + d + "</strong><span>" + date + "</span>";
    btn.addEventListener("click", () => {
      currentDay = day;
      renderDayTabs();
      renderCards();
    });
    dayTabsEl.appendChild(btn);
  });
}

function renderCards() {
  const items = schedule.filter(item => item.day === currentDay);
  cardContainer.innerHTML = "";

  const label = dayMeta[currentDay] || currentDay;
  const parts = label.split(" ¬∑ ");
  const d = parts[0] || currentDay;
  const date = parts[1] || "";
  dayTitleEl.innerHTML = d + " <span>" + date + "</span>";

  if (!items.length) {
    emptyState.style.display = "block";
    return;
  }
  emptyState.style.display = "none";

  items.forEach(item => {
    const card = document.createElement("div");
    card.className = "card collapsed";

    const dot = document.createElement("div");
    dot.className = "dot";
    card.appendChild(dot);

    const header = document.createElement("div");
    header.className = "card-header";

    const left = document.createElement("div");

    const time = document.createElement("div");
    time.className = "time";
    time.textContent = item.time || "";

    const title = document.createElement("div");
    title.className = "title";
    title.textContent = item.title || "";

    left.appendChild(time);
    left.appendChild(title);

    const right = document.createElement("div");
    right.className = "right-top";

    const chip = document.createElement("div");
    chip.className = "category-chip";
    chip.textContent = item.category || "Ë°åÁ®ã";

    const chev = document.createElement("div");
    chev.className = "chev";
    chev.textContent = "‚ñæ";

    right.appendChild(chip);
    right.appendChild(chev);

    header.appendChild(left);
    header.appendChild(right);

    const detail = document.createElement("div");
    detail.className = "detail";

    const note = document.createElement("div");
    note.className = "note";
    note.textContent = item.note || "";

    const footer = document.createElement("div");
    footer.className = "card-footer";

    const cost = document.createElement("div");
    cost.className = "cost";
    cost.textContent = item.cost || "";

    const linkWrap = document.createElement("div");
    linkWrap.className = "link-wrap";

    if (Array.isArray(item.links) && item.links.length) {
      item.links.forEach(l => {
        const btn = document.createElement("button");
        btn.className = "btn-link";
        btn.textContent = l.label || "ÈÄ£Áµê";
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          window.open(l.url, "_blank");
        });
        linkWrap.appendChild(btn);
      });
    } else {
      const btn = document.createElement("button");
      btn.className = "btn-link";
      btn.textContent = "ÁÑ°ÈÄ£Áµê";
      btn.disabled = true;
      linkWrap.appendChild(btn);
    }

    footer.appendChild(cost);
    footer.appendChild(linkWrap);

    detail.appendChild(note);
    detail.appendChild(footer);

    card.appendChild(header);
    card.appendChild(detail);

    card.addEventListener("click", () => {
      card.classList.toggle("collapsed");
    });

    cardContainer.appendChild(card);
  });
}

renderDayTabs();
renderCards();

if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("service-worker.js").catch(() => {});
  });
}
  </script>
</body>
</html>













