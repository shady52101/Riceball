<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Okinawa Trip Planner</title>

  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#f06292" />

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Okinawa Trip" />

  <style>
    :root {
      --primary: #ec407a;
      --primary-dark: #d81b60;
      --bg: #fef4f8;
      --card-bg: #ffffff;
      --text-main: #212121;
      --text-sub: #757575;
      --radius-xl: 18px;
      --shadow-soft: 0 10px 24px rgba(233, 30, 99, 0.18);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #ffe3f0 0, #fef4f8 45%, #ffffff 100%);
      color: var(--text-main);
    }
    .app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 18px 20px 14px;
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      color: white;
      position: sticky;
      top: 0;
      z-index: 10;
      box-shadow: 0 6px 18px rgba(233, 30, 99, 0.35);
      border-radius: 0 0 24px 24px;
    }
    header h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 800;
      letter-spacing: 0.04em;
    }
    header .subtitle {
      font-size: 13px;
      opacity: 0.92;
      margin-top: 4px;
    }
    .day-tabs-wrap {
      padding: 10px 16px 4px;
      position: sticky;
      top: 72px;
      z-index: 9;
    }
    .day-tabs {
      display: flex;
      gap: 8px;
      background: rgba(255,255,255,0.9);
      padding: 6px;
      border-radius: 999px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      backdrop-filter: blur(10px);
    }
    .day-tab {
      flex: 1;
      padding: 8px 0;
      border-radius: 999px;
      border: 0;
      background: transparent;
      color: var(--primary-dark);
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
    }
    .day-tab span { display: block; font-size: 11px; opacity: 0.8; }
    .day-tab strong { display: block; font-size: 13px; }
    .day-tab.active {
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      color: #ffffff;
      box-shadow: 0 4px 12px rgba(233, 30, 99, 0.55);
    }
    main { flex: 1; padding: 16px 14px 32px; }
    .day-title {
      font-size: 15px;
      font-weight: 600;
      margin: 4px 4px 10px;
      color: var(--text-sub);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .day-title span { font-size: 12px; opacity: 0.9; }
    .timeline { position: relative; margin-left: 10px; padding-left: 12px; }
    .timeline::before {
      content: "";
      position: absolute;
      left: 4px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, rgba(236,64,122,0.1), rgba(236,64,122,0.35));
    }
    .card {
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      padding: 12px 14px;
      margin-bottom: 12px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
      cursor: pointer;
      user-select: none;
    }
    .card::before {
      content: "";
      position: absolute;
      left: -40px;
      top: -40px;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(236,64,122,0.18), transparent 65%);
      opacity: 0.7;
    }
    .dot {
      position: absolute;
      left: -18px;
      top: 16px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 2px solid #ffffff;
      background: var(--primary);
      box-shadow: 0 0 0 4px rgba(236,64,122,0.25);
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
    }
    .time { font-size: 11px; color: var(--text-sub); margin-bottom: 4px; }
    .title { font-size: 15px; font-weight: 700; margin-bottom: 2px; }
    .right-top { display:flex; align-items:center; gap:8px; }
    .category-chip {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(236,64,122,0.06);
      color: var(--primary-dark);
      border: 1px solid rgba(236,64,122,0.25);
      margin-top: 2px;
      white-space: nowrap;
    }
    .chev {
      font-size: 14px;
      color: rgba(216,27,96,0.75);
      transition: transform 0.18s ease;
    }
    .card.collapsed .chev { transform: rotate(-90deg); }
    .detail { margin-top: 10px; }
    .card.collapsed .detail { display: none; }
    .note {
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 8px;
      line-height: 1.5;
      white-space: pre-line;
    }
    .card-footer {
      display: flex;
      align-items: center;
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
      gap: 8px;
      flex-wrap: wrap;
    }
    .cost { font-weight: 500; margin-right: auto; white-space: pre-line; }
    .link-wrap { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn-link {
      font-size: 12px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 0;
      background: linear-gradient(135deg, #ec407a, #ff80ab);
      color: #ffffff;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(233,30,99,0.35);
      white-space: nowrap;
    }
    .btn-link:disabled {
      opacity: 0.4;
      box-shadow: none;
      cursor: default;
      background: #e0e0e0;
      color: #757575;
    }
    .empty {
      text-align: center;
      color: var(--text-sub);
      margin-top: 40px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Okinawa Trip</h1>
      <div class="subtitle">Ê≤ñÁπ©Ë°ùË°ùË°ù</div>
    </header>

    <div class="day-tabs-wrap">
      <div class="day-tabs" id="dayTabs"></div>
    </div>

    <main>
      <div class="day-title" id="dayTitle"></div>
      <div class="timeline" id="cardContainer"></div>
      <div class="empty" id="emptyState" style="display:none;">ÈÄô‰∏ÄÂ§©ÈÇÑÊ≤íÊúâÂÆâÊéíË°åÁ®ã</div>
    </main>
  </div>

  <script>
/**
 * ‚úÖ ÈÄ£ÁµêËá™Áî±ÂëΩÂêçË¶èÂâáÔºà‰Ω†Âè™Ë¶ÅÊîπÈÄôË£°Ôºâ
 * link ÂèØ‰ª•ÊòØÔºö
 * 1) Â≠ó‰∏≤ÔºàÂèØÁî® \\n ÊîæÂ§öÂÄãÁ∂≤ÂùÄÔºâ=> ÊúÉËá™ÂãïÁî¢Áîü„Äåicon + Á∂≤Á´ôÂêç„Äç
 * 2) Èô£Âàó [{ label, url }, ...] => ‰Ω†Áµ¶‰ªÄÈ∫ºÂêçÂ≠óÂ∞±È°ØÁ§∫‰ªÄÈ∫ºÂêçÂ≠óÔºàicon ‰Ω†‰πüÂèØ‰ª•Ëá™Â∑±ÂØ´ÈÄ≤ labelÔºâ
 */
const schedule = [
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "13:25‚Äì15:55Ôºà2Â∞èÊôÇ30ÂàÜÔºâ",
    title: "Ê°ÉÊ©üT1 -> ÈÇ£Èú∏Ê©üÂ†¥",
    category: "‰∫§ÈÄö",
    note: "AirAsia FD230\nÊâãÊèê7kg*3 Ë®óÈÅã20kg*2\nÂúãÈöõÁ∑ö4FÊàñÊòØÂúãÂÖßÁ∑ö1FÊúâË±¨ËÇâËõãÈ£ØÁ≥∞",
    cost: "Â∑≤‰ªò 18,262 NTD (‰æÜÂõû)",
    link: [
      { label: "‚úàÔ∏è Visit Japan Web", url: "https://services.digital.go.jp/zh-cmn-hant/visit-japan-web/" },
      { label: "üçî Ë±¨ËÇâËõãÈ£ØÁ≥∞‰ªãÁ¥π", url: "https://hanblog.tw/porktamago/" }
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "15:55‚Äì17:55Ôºà2Â∞èÊôÇÔºâ",
    title: "ÈÇ£Èú∏Ê©üÂ†¥ -> ÁßüËªäÂÖ¨Âè∏",
    category: "‰∫§ÈÄö",
    note: "Âá∫Â¢É + ÁßüËªäÂÖ¨Âè∏Êé•ÈÄÅ + ÁßüËªä\nË°åËÖ≥ÁßüËªä (Pin code : 63512871)",
    cost: "Êú™‰ªò 18.090ÂÜÜ\nÂ∑≤‰ªò 2,010ÂÜÜ",
    link: [
      { label: "üöå Êé•ÈßÅËªä‰ΩçÁΩÆ", url: "youtube.com/watch?v=iAl8v1AAcjM&embeds_referring_euri=https%3A%2F%2Ffootprint-rentacar.com%2F&source_ve_path=OTY3MTQ/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "17:55‚Äì18:25Ôºà30ÂàÜÔºâ",
    title: "ÁßüËªäÂÖ¨Âè∏ -> ÊôöÈ§ê",
    category: "‰∫§ÈÄö",
    note: "ÊºÅÂ∏´È£üÂ†Ç Â§ß„ÅØ„Çô„Çì„Åµ„Çô„ÇãËàû „Åï„Åã„Å™Â§ßÁµ±",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Okinawaangya+Car+Rental,+3+Chome-8-11+Kanagusuku,+Naha,+Okinawa+901-0155%E6%97%A5%E6%9C%AC/Ryoshi+Shokudo+Obanburumai+Sakana+Daitoryo,+3+Chome-1-17+Minatomachi,+Naha,+Okinawa+900-0001%E6%97%A5%E6%9C%AC/@26.2267077,127.7007522,13.42z/data=!3m1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m15!4m14!1m5!1m1!1s0x34e569dca4935975:0xf7655eeca9dc26ba!2m2!1d127.6621154!2d26.2011231!1m5!1m1!1s0x34e56b047c4b65c9:0x3e70d1280ee22c7a!2m2!1d127.6803223!2d26.2436476!3e0!5i1?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "18:25‚Äì19:25Ôºà1Â∞èÊôÇÔºâ",
    title: "ÊôöÈ§ê",
    category: "Áî®È§ê",
    note: "ÊºÅÂ∏´È£üÂ†Ç Â§ß„ÅØ„Çô„Çì„Åµ„Çô„ÇãËàû „Åï„Åã„Å™Â§ßÁµ±\nÂ§ß‰ªΩÈáè‰∏ºÈ£Ø",
    cost: "cash only",
    link: [
      { label: "üç£ È§êÂª≥‰ªãÁ¥π", url: "https://plumpyblog.com/ryoshi-shokudo/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "19:25‚Äì20:05Ôºà40ÂàÜÔºâ",
    title: "ÊôöÈ§ê -> È£ØÂ∫ó checkin ",
    category: "‰∫§ÈÄö",
    note: "sunset beach hotel Âê´Êó©È§ê",
    cost: "Â∑≤‰ªò 4,420 NTD",
    link: [
      { label: "üõèÔ∏è È£ØÂ∫ó", url: "https://beachmonpa.co.jp/" },
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Ryoshi+Shokudo+Obanburumai+Sakana+Daitoryo,+3+Chome-1-17+Minatomachi,+Naha,+Okinawa+900-0001%E6%97%A5%E6%9C%AC/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/@26.2790994,127.6809087,13z/data=!3m2!4b1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m14!4m13!1m5!1m1!1s0x34e56b047c4b65c9:0x3e70d1280ee22c7a!2m2!1d127.6803223!2d26.2436476!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "20:05‚Äì21:25Ôºà1Â∞èÊôÇ20ÂàÜÔºâ",
    title: "ÁæéÂúãÊùëÈÄõË°ó",
    category: "Ë≥ºÁâ©",
    note: "",
    cost: "",
    link: [
    { label: "üõçÔ∏è ÈÄõË°óÂú∞Âúñ1", url: "https://plumpyblog.com/ryoshi-shokudo/" },
    { label: "üõçÔ∏è ÈÄõË°óÂú∞Âúñ2", url: "https://bobbyfun.tw/2024-01-08-2709/" },
    { label: "üõçÔ∏è ÈÄõË°óÂú∞Âúñ3", url: "https://okinawa.letsgojp.com/archives/11334/" },
    ],
  },
  {
    day: "D1",
    label: "D1 ¬∑ 1/9",
    time: "21:25‚Äì22:55Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "AEON ÂåóË∞∑",
    category: "Ë≥ºÁâ©",
    note: "Â™ΩÂ™ΩÊôÇÈñì\nË∂ÖÂ∏ÇÂà∞ 23:00 ÂïÜÂ∫óÂà∞22:00",
    cost: "",
     link: [
    { label: "üõçÔ∏è ÈÄõË°óÂú∞Âúñ", url: "https://bobowin.blog/aeon-american/" },
    ],
  }, 
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "08:30‚Äì09:00Ôºà30ÂàÜÔºâ",
    title: "È£ØÂ∫ó",
    category: "Áî®È§ê",
    note: "È£ØÂ∫óÊó©È§ê",
    cost: "",
    link: [
      { label: "üõèÔ∏è È£ØÂ∫ó", url: "https://beachmonpa.co.jp/" },
      ],
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "09:00‚Äì09:30Ôºà30ÂàÜÔºâ",
    title: "È£ØÂ∫ó -> Ê≤ñÁπ©ÂÖíÁ´•ÁéãÂúã",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Goya,+5+Chome%E2%88%927+%E6%B2%96%E7%B9%A9%E5%85%92%E7%AB%A5%E7%8E%8B%E5%9C%8B/@26.316697,127.7690274,15z/data=!3m1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m15!4m14!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e512738000a60d:0x8be494fd3bd9ee0b!2m2!1d127.80304!2d26.327691!3e0!5i1?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ],
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "09:30‚Äì12:30Ôºà3Â∞èÊôÇÔºâ",
    title: "Ê≤ñÁπ©ÂÖíÁ´•ÁéãÂúã",
    category: "ÊôØÈªû",
    note: "Âπ≥Êó•ÁáüÊ•≠ÊôÇÈñì : 9:30-17:30\nÂÅáÊó•ÁáüÊ•≠ÊôÇÈñì : 9:30-21:00",
    cost: "Êú™‰ªò Êàê‰∫∫ 1,000ÂÜÜ\nÂ∞èÂ≠© free",
    link: [
      { label: "üå¥ ÂÖíÁ´•ÁéãÂúã", url: "https://www.okzm.jp/information-cht/" },
      ],
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "12:30‚Äì13:00Ôºà30ÂàÜÔºâ",
    title: "Ê≤ñÁπ©ÂÖíÁ´•ÁéãÂúã -> ÁæéÂúãÊùë",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Goya,+5+Chome%E2%88%927+%E6%B2%96%E7%B9%A9%E5%85%92%E7%AB%A5%E7%8E%8B%E5%9C%8B/@26.316697,127.7690274,15z/data=!3m1!5s0x34e569b7a599cbfd:0x91d234b6c3aa40f1!4m15!4m14!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e512738000a60d:0x8be494fd3bd9ee0b!2m2!1d127.80304!2d26.327691!3e0!5i1?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },

  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "13:00‚Äì14:30Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "ÂçàÈ§ê+ÂõûÈ£ØÂ∫ó",
    category: "Áî®È§ê",
    note: "AI Êé®Ëñ¶ :  „Çπ„ÉÜ„Éº„Ç≠„Éè„Ç¶„ÇπÂõõÂ≠£ÔºàSunabeÔºâ-ÈêµÊùøÁâõÊéí\nAI Êé®Ëñ¶ :  È≥•„Å®Âçµ„ÅÆÂ∞ÇÈñÄÂ∫ó È≥•ÁéâÔºàÂåóË∞∑Â∫óÔºâ- Ë¶™Â≠ê‰∏º„ÄÅÁéâÂ≠êÁáí„ÄÅÂíñÂì©\nAI Êé®Ëñ¶ :  „ÇÑ„Å£„Å±„Çä„Çπ„ÉÜ„Éº„Ç≠ÔºàÁæéÂúãÊùë) - ÁæéÂºèÈ§êÂª≥",
    cost: "",
    link: [
      { label: "üçΩÔ∏è ÁæéÈ£üÊé®Ëñ¶", url: "https://tw.tabiiro.travel/gourmet/article/americanvillage-gourmet/" },
    ]
  },

  
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "14:30‚Äì16:30Ôºà2Â∞èÊôÇÔºâ",
    title: "È£ØÂ∫ó",
    category: "‰ºëÊÅØ",
    note: "ÂÖÖÈõªÊôÇÈñì/Â™ΩÂ™ΩËá™Áî±ÊôÇÈñì",
    cost: "",
    link: "",
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "16:30‚Äì17:10Ôºà40ÂàÜÔºâ",
    title: "È£ØÂ∫ó -> Êù±ÂçóÊ§çÁâ©Ê®ÇÂúí",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+8-11+Mihama,+Chatan,+Nakagami+District,+Okinawa+904-0115%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Chibana,+%E6%9D%B1%E5%8D%97%E6%A4%8D%E7%89%A9%E6%A8%82%E5%9C%92/@26.3421377,127.7550494,13.5z/data=!4m14!4m13!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e511d8db9268d7:0x97aa9da99ec7390b!2m2!1d127.8065709!2d26.3755374!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "17:10‚Äì19:40Ôºà2Â∞èÊôÇ30ÂàÜÔºâ",
    title: "Êù±ÂçóÊ§çÁâ©Ê®ÇÂúí",
    category: "ÊôØÈªû",
    note: "ÁáàÂÖâÁßÄÔºåÂ§úÈñìÁ•®17:00~22:00 \n(Áï∂Â§©ÊúâÊó•Êú¨Êàê‰∫∫ÁØÄÊ¥ªÂãïÔºåÁ¥∞ÁØÄÊú™Áü•)",
    cost: "Êú™‰ªò Êàê‰∫∫ 2500ÂÜÜ/Â∞èÂ≠© 900ÂÜÜ",
    link: [
    { label: "üéÜ ÊôØÈªûË≥áË®ä", url: "https://www.southeast-botanical.jp/tw/illumination/" },
    ]
  },
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "19:40‚Äì20:20Ôºà40ÂàÜÔºâ",
    title: "Êù±ÂçóÊ§çÁâ©Ê®ÇÂúí -> ÁæéÂúãÊùë",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+8-11+Mihama,+Chatan,+Nakagami+District,+Okinawa+904-0115%E6%97%A5%E6%9C%AC/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%B2%96%E7%B9%A9%E5%B8%82+Chibana,+%E6%9D%B1%E5%8D%97%E6%A4%8D%E7%89%A9%E6%A8%82%E5%9C%92/@26.3421377,127.7550494,13.5z/data=!4m14!4m13!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e511d8db9268d7:0x97aa9da99ec7390b!2m2!1d127.8065709!2d26.3755374!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  
  {
    day: "D2",
    label: "D2 ¬∑ 1/10",
    time: "20:20‚Äì21:30Ôºà1Â∞èÊôÇ10ÂàÜÔºâ",
    title: "ÊôöÈ§ê+ÂõûÈ£ØÂ∫ó",
    category: "Áî®È§ê",
    note: "",
    cost: "",
    link: "",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "08:30‚Äì09:00Ôºà30ÂàÜÔºâ",
    title: "È£ØÂ∫ó",
    category: "Áî®È§ê",
    note: "È£ØÂ∫óÊó©È§ê + check out",
    cost: "",
    link: "",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "09:00‚Äì10:00Ôºà1Â∞èÊôÇÔºâ",
    title: "È£ØÂ∫ó -> Ê≤ñÁπ©‰∏ñÁïå(ÁéâÊ≥âÊ¥û)",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/Sunset+Beach+Hotel,+Mihama,+%E5%8C%97%E8%B0%B7%E7%94%BA%E6%B2%96%E7%B9%A9%E7%B8%A3%E6%97%A5%E6%9C%AC/%E7%8E%89%E6%B3%89%E6%B4%9E+%E6%97%A5%E6%9C%AC%E3%80%92901-0616+Okinawa,+Nanjo,+Tamagusuku,+Maekawa%E2%88%921336/@26.2289476,127.6742781,12z/data=!4m14!4m13!1m5!1m1!1s0x34e5131000bf5917:0xfd9aa7dd159e858c!2m2!1d127.7556197!2d26.3147997!1m5!1m1!1s0x34e56985519f786b:0x5e9a8bdcd64306dd!2m2!1d127.7494344!2d26.1403423!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "10:00‚Äì13:00Ôºà3Â∞èÊôÇÔºâ",
    title: "Ê≤ñÁπ©‰∏ñÁïå(ÁéâÊ≥âÊ¥û)",
    category: "ÊôØÈªû",
    note: "„ÄäSUPER EISAÂ§™ÈºìËàû„Äã1)10:30 2)12:30 3)14:30\n„ÄäÊØíËõáË°®Êºî„Äã1)11:30 2)13:30 3)15:30\nËæ£Ê§íÁ≤âÂøÖË≤∑",
    cost: "Êú™‰ªò Êàê‰∫∫ 2000ÂÜÜ\nÊú™‰ªò nÂ∞èÂ≠© 1000ÂÜÜ",
        link: [
      { label: "üé∂ Ê≤ñÁπ©‰∏ñÁïå", url: "https://www.google.com/search?q=%E6%B2%96%E7%B9%A9%E4%B8%96%E7%95%8C+%E7%8E%89%E6%B3%89%E6%B4%9E" },
    ]
  },
    {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "13:00‚Äì13:15Ôºà15ÂàÜÔºâ",
    title: "Ê≤ñÁπ©‰∏ñÁïå(ÁéâÊ≥âÊ¥û) -> costco",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: [
      { label: "üöó google map", url: "https://www.google.com/maps/dir/%E7%8E%89%E6%B3%89%E6%B4%9E+%E6%97%A5%E6%9C%AC%E3%80%92901-0616+Okinawa,+Nanjo,+Tamagusuku,+Maekawa%E2%88%921336/%E6%97%A5%E6%9C%AC%E6%B2%96%E7%B9%A9%E7%B8%A3%E5%8D%97%E5%9F%8E%E5%B8%82+Tsukishiro,+Kakinohana+COSTCO%E5%A5%BD%E5%B8%82%E5%A4%9A+%E6%B2%96%E7%B9%A9%E5%BA%97/@26.1505262,127.7561295,15z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0x34e56985519f786b:0x5e9a8bdcd64306dd!2m2!1d127.7494344!2d26.1403423!1m5!1m1!1s0x34e56f002d5171dd:0x6f86b1ebb56a155c!2m2!1d127.7866429!2d26.1552838!3e0?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoKLDEwMDc5MjA3MUgBUAM%3D/" },
    ]
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "13:15‚Äì14:50Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "ÈÄõË°ó + ÂçàÈ§ê",
    category: "Áî®È§ê",
    note: "AIÊé®Ëñ¶ : ÁéâÂÆ∂„Åù„Å∞ Êú¨Â∫óÔºàÂçóÂüé) - Ê≤ñÁπ©È∫µ\\nAIÊé®Ëñ¶ : ÂçóÈÉ®ÂíñÂï°Âª≥ÔºöCafe „ÇÑ„Å∂„Åï„Å°ÔºàÊµ∑ÊôØ) - Áæ©Â§ßÂà©È∫µ„ÄÅÈ£ØÈ°û\\nAIÊé®Ëñ¶ : ÁáíËÇâ„Åç„Çì„ÅêÔºàË±êÂ¥é) - Outlet ÂâçÈùûÂ∏∏È†ÜË∑Ø",
    cost: "",
    link: "",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "14:50‚Äì15:20Ôºà30ÂàÜÔºâ",
    title: "ÂçàÈ§ê > ASHIBINAA Outlet or PARCO CITY",
    category: "‰∫§ÈÄö",
    note: "ÂèØËÄÉÊÖÆÂéªcostco (10ÂàÜÈêòËªäÁ®ã)",
    cost: "",
    link: "",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "15:20‚Äì17:50Ôºà2Â∞èÊôÇ30ÂàÜÔºâ",
    title: "ASHIBINAA Outlet or PARCO CITY",
    category: "Ë≥ºÁâ© / Ë∂ÖÂ∏Ç",
    note: "Ë°ÄÊãö (Á∂≤ÂèãÊôÆÈÅçÊé®Ëñ¶parco city)",
    cost: "",
    link: "",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "17:50‚Äì18:20Ôºà30ÂàÜÔºâ",
    title: "ASHIBINAA Outlet or PARCO CITY  -> È£ØÂ∫ó",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: "",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "18:20‚Äì18:50Ôºà30ÂàÜÔºâ",
    title: "È£ØÂ∫ó checkin",
    category: "È£ØÂ∫ó / ‰ºëÊÅØ",
    note: "Â§ßÂíåROYNETÂúãÈöõÈÄöÈ£ØÂ∫ó (È£ØÂ∫ó‰ªòË≤ªÂÅúËªäÂ†¥ÔºåÂÖàÂà∞ÂÖàË¥è)\\n ÊòüÊúüÊó• 12:00~18:00 Ê≠•Ë°åËÄÖÂ§©Âúã",
    cost: "NTD 4227",
    link: "trip.com",
  },
  {
    day: "D3",
    label: "D3 ¬∑ 1/11",
    time: "18:50‚Äì20:50Ôºà2Â∞èÊôÇÔºâ",
    title: "ÂúãÈöõÈÄöÈÄõË°ó+ÊôöÈ§ê",
    category: "Áî®È§ê",
    note: "AIÊé®Ëñ¶ : Ëä±Á¨†È£üÂ†Ç - ÂÆ∂Â∫≠ÂºèÊñôÁêÜ\\nAIÊé®Ëñ¶ : ‰∏âÁ¨†È£üÂ†ÇÔºà24 Â∞èÊôÇ) - Âú®Âú∞È§êÂª≥\\nelbun",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "08:30‚Äì10:00Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "È£ØÂ∫ó",
    category: "Áî®È§ê",
    note: "Êó©È§ê + check out / \\nÊó©È§êË¶ÅÂä†Ë≥º322/‰∫∫ÔºåÂÖíÁ´•ÂÖçË≤ª",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "10:00‚Äì10:15Ôºà15ÂàÜÔºâ",
    title: "È£ØÂ∫ó > Ê≥¢‰∏äÂÆÆ",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "10:15‚Äì10:45Ôºà30ÂàÜÔºâ",
    title: "Ê≥¢‰∏äÂÆÆ",
    category: "ÊôØÈªû",
    note: "",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "10:45‚Äì11:00Ôºà15ÂàÜÔºâ",
    title: "Ê≥¢‰∏äÂÆÆ > ÈÇ£Èú∏Ê∏Ø",
    category: "‰∫§ÈÄö",
    note: "",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "11:00‚Äì12:30Ôºà1Â∞èÊôÇ30ÂàÜÔºâ",
    title: "ÈÇ£Èú∏Ê∏Ø",
    category: "ÊôØÈªû",
    note: "11:30 ËßÄÂÖâËàπ",
    cost: "",
    link: "https://fullfenblog.tw/glass-bottom-boat/",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "12:30‚Äì13:45Ôºà1Â∞èÊôÇ15ÂàÜÔºâ",
    title: "ÂçàÈ§ê+Âà∞ÁßüËªäÂÖ¨Âè∏",
    category: "Áî®È§ê",
    note: "ÂçàÈ§êÂæåÂéªÁßüËªäÂÖ¨Âè∏ÈÇÑËªä / \\nÂèØ‰ª•ËÄÉÊÖÆÊê≠ÈÖçÊµ∑ÈÆÆ‰∏ºÂêÉÂà∞È£ΩÊñπÊ°à\\nÂÇëÂÖãÁâõÊéíÈ§®(ÂèØËÉΩ‰∫∫Â§ö‰æÜ‰∏çÂèä)\\nÁêâÁêÉÊñ∞È∫µ ÈÄöÂ†Ç Â∞èÁ•øÊú¨Â∫ó\\nNakazaya „Å™„Åã„ÅñÂÆ∂ ÁßüËªäÂÖ¨Âè∏ÈôÑËøë\\nAIÊé®Ëñ¶ : Â§ßÊù±„Åù„Å∞ÔºàËµ§Â∂∫Á´ôÊóÅÔºâ\\nAIÊé®Ëñ¶ : Ê©üÂ†¥ÂúãÂÖßÁ∑ö 4F È§êÂª≥Ë°ó",
    cost: "",
    link: "https://tw.westmarine.co.jp/orca_lunch.php",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "13:45‚Äì14:15Ôºà30ÂàÜÔºâ",
    title: "ÁßüËªäÂÖ¨Âè∏ > Ê©üÂ†¥",
    category: "‰∫§ÈÄö",
    note: "ÈÇÑËªä+Êé•ÈßÅÂà∞Ê©üÂ†¥",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "14:15‚Äì16:55Ôºà2Â∞èÊôÇ40ÂàÜÔºâ",
    title: "ÈÇ£Èú∏Ê©üÂ†¥",
    category: "‰∫§ÈÄö",
    note: "check in/ Â∞ñÂ≥∞ÊôÇÊÆµÊúÄÂ•Ω‰øùÁïô2:30",
    cost: "",
    link: "",
  },
  {
    day: "D4",
    label: "D4 ¬∑ 1/12",
    time: "16:55‚Äì17:55Ôºà1Â∞èÊôÇÔºâ",
    title: "ÈÇ£Èú∏Ê©üÂ†¥ > Ê°ÉÊ©üT1",
    category: "‰∫§ÈÄö",
    note: "AirAsia FD231",
    cost: "",
    link: "",
  },
];

function normalizeUrl(raw) {
  const s = (raw || "").trim();
  if (!s) return "";
  if (/^https?:\/\//i.test(s)) return s;
  if (/^[a-z0-9.-]+\.[a-z]{2,}(\/.*)?$/i.test(s)) return "https://" + s;
  return "";
}

function splitLinkField(linkField) {
  if (!linkField) return [];
  if (Array.isArray(linkField)) return linkField;
  return String(linkField)
    .split(/\\n|\\r|,\\s*/g)
    .map(p => p.trim())
    .filter(Boolean);
}

function guessIcon(url) {
  try {
    const u = new URL(url);
    const host = u.hostname.replace(/^www\\./, "").toLowerCase();
    const full = (host + (u.pathname || "")).toLowerCase();
    if (full.includes("google.com/maps") || full.includes("maps.app.goo.gl") || host.includes("maps")) return "üìç";
    if (full.includes("booking") || full.includes("ticket") || full.includes("reserve") || full.includes("trip.com") || full.includes("klook") || full.includes("kkday")) return "üéüÔ∏è";
    return "üåê";
  } catch (e) {
    return "üåê";
  }
}

// Build item.links (used by UI)
// - If link is array [{label,url}] => respect label 100%
// - If link is string => auto label = icon + host
schedule.forEach(item => {
  const raw = splitLinkField(item.link);
  const links = [];
  raw.forEach(v => {
    if (typeof v === "string") {
      const url = normalizeUrl(v);
      if (!url) return;
      const icon = guessIcon(url);
      let host = "";
      try { host = new URL(url).hostname.replace(/^www\\./,""); } catch(e) {}
      links.push({ label: `${icon} ${host || "ÈÄ£Áµê"}`, url });
    } else if (v && v.url) {
      const url = normalizeUrl(v.url);
      if (!url) return;
      links.push({ label: v.label || (guessIcon(url) + " ÈÄ£Áµê"), url });
    }
  });
  item.links = links;
});

const days = Array.from(new Set(schedule.map(item => item.day)));
const dayMeta = {};
schedule.forEach(item => { if (!dayMeta[item.day]) dayMeta[item.day] = item.label; });

const dayTabsEl = document.getElementById("dayTabs");
const cardContainer = document.getElementById("cardContainer");
const emptyState = document.getElementById("emptyState");
const dayTitleEl = document.getElementById("dayTitle");

let currentDay = days[0] || "D1";

function renderDayTabs() {
  dayTabsEl.innerHTML = "";
  days.forEach(day => {
    const btn = document.createElement("button");
    btn.className = "day-tab" + (day === currentDay ? " active" : "");
    const label = dayMeta[day] || day;
    const parts = label.split(" ¬∑ ");
    const d = parts[0] || day;
    const date = parts[1] || "";
    btn.innerHTML = "<strong>" + d + "</strong><span>" + date + "</span>";
    btn.addEventListener("click", () => {
      currentDay = day;
      renderDayTabs();
      renderCards();
    });
    dayTabsEl.appendChild(btn);
  });
}

function renderCards() {
  const items = schedule.filter(item => item.day === currentDay);
  cardContainer.innerHTML = "";

  const label = dayMeta[currentDay] || currentDay;
  const parts = label.split(" ¬∑ ");
  const d = parts[0] || currentDay;
  const date = parts[1] || "";
  dayTitleEl.innerHTML = d + " Ë°åÁ®ã <span>" + date + "</span>";

  if (!items.length) {
    emptyState.style.display = "block";
    return;
  }
  emptyState.style.display = "none";

  items.forEach(item => {
    const card = document.createElement("div");
    card.className = "card collapsed";

    const dot = document.createElement("div");
    dot.className = "dot";
    card.appendChild(dot);

    const header = document.createElement("div");
    header.className = "card-header";

    const left = document.createElement("div");

    const time = document.createElement("div");
    time.className = "time";
    time.textContent = item.time || "";

    const title = document.createElement("div");
    title.className = "title";
    title.textContent = item.title || "";

    left.appendChild(time);
    left.appendChild(title);

    const right = document.createElement("div");
    right.className = "right-top";

    const chip = document.createElement("div");
    chip.className = "category-chip";
    chip.textContent = item.category || "Ë°åÁ®ã";

    const chev = document.createElement("div");
    chev.className = "chev";
    chev.textContent = "‚ñæ";

    right.appendChild(chip);
    right.appendChild(chev);

    header.appendChild(left);
    header.appendChild(right);

    const detail = document.createElement("div");
    detail.className = "detail";

    const note = document.createElement("div");
    note.className = "note";
    note.textContent = item.note || "";

    const footer = document.createElement("div");
    footer.className = "card-footer";

    const cost = document.createElement("div");
    cost.className = "cost";
    cost.textContent = item.cost || "";

    const linkWrap = document.createElement("div");
    linkWrap.className = "link-wrap";

    if (Array.isArray(item.links) && item.links.length) {
      item.links.forEach(l => {
        const btn = document.createElement("button");
        btn.className = "btn-link";
        btn.textContent = l.label || "ÈÄ£Áµê";
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          window.open(l.url, "_blank");
        });
        linkWrap.appendChild(btn);
      });
    } else {
      const btn = document.createElement("button");
      btn.className = "btn-link";
      btn.textContent = "ÁÑ°ÈÄ£Áµê";
      btn.disabled = true;
      linkWrap.appendChild(btn);
    }

    footer.appendChild(cost);
    footer.appendChild(linkWrap);

    detail.appendChild(note);
    detail.appendChild(footer);

    card.appendChild(header);
    card.appendChild(detail);

    card.addEventListener("click", () => {
      card.classList.toggle("collapsed");
    });

    cardContainer.appendChild(card);
  });
}

renderDayTabs();
renderCards();

if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("service-worker.js").catch(() => {});
  });
}
  </script>
</body>
</html>




